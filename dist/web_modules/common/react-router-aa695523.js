import n from"../react.js";function t(){return(t=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function e(n){n.preventDefault(),n.returnValue=""}function r(){var n=[];return{get length(){return n.length},push:function(t){return n.push(t),function(){n=n.filter((function(n){return n!==t}))}},call:function(t){n.forEach((function(n){return n&&n(t)}))}}}function a(){return Math.random().toString(36).substr(2,8)}function o(n){var t=n.pathname,e=n.search;return(void 0===t?"/":t)+(void 0===e?"":e)+(void 0===(n=n.hash)?"":n)}function i(n){var t={};if(n){var e=n.indexOf("#");0<=e&&(t.hash=n.substr(e),n=n.substr(0,e)),0<=(e=n.indexOf("?"))&&(t.search=n.substr(e),n=n.substr(0,e)),n&&(t.pathname=n)}return t}var u=function(n){function u(){var n=h.location,t=p.state||{};return[t.idx,{pathname:n.pathname,search:n.search,hash:n.hash,state:t.usr||null,key:t.key||"default"}]}function c(n){return"string"==typeof n?n:o(n)}function l(n,e){return void 0===e&&(e=null),t({},g,{},"string"==typeof n?i(n):n,{state:e,key:a()})}function s(n){d=n,n=u(),y=n[0],g=n[1],P.call({action:d,location:g})}function f(n){p.go(n)}var h=void 0===(n=(void 0===n?{}:n).window)?document.defaultView:n,p=h.history,v=null;h.addEventListener("popstate",(function(){if(v)m.call(v),v=null;else{var n=u(),t=n[0];if(n=n[1],m.length)if(null!=t){var e=y-t;e&&(v={action:"POP",location:n,retry:function(){f(-1*e)}},f(e))}else s("POP")}}));var d="POP",y=(n=u())[0],g=n[1],m=r(),P=r();return null==y&&(y=0,p.replaceState(t({},p.state,{idx:y}),null)),{get action(){return d},get location(){return g},createHref:c,push:function n(t,e){var r=l(t,e);if(!m.length||(m.call({action:"PUSH",location:r,retry:function(){n(t,e)}}),0)){var a=[{usr:r.state,key:r.key,idx:y+1},c(r)];r=a[0],a=a[1];try{p.pushState(r,null,a)}catch(n){h.location.assign(a)}s("PUSH")}},replace:function n(t,e){var r=l(t,e);m.length&&(m.call({action:"REPLACE",location:r,retry:function(){n(t,e)}}),1)||(r=[{usr:r.state,key:r.key,idx:y},c(r)],p.replaceState(r[0],null,r[1]),s("REPLACE"))},go:f,back:function(){f(-1)},forward:function(){f(1)},listen:function(n){return P.push(n)},block:function(n){var t=m.push(n);return 1===m.length&&h.addEventListener("beforeunload",e),function(){t(),m.length||h.removeEventListener("beforeunload",e)}}}},c=function(n){function u(){var n=i(p.location.hash.substr(1)),t=n.pathname,e=n.search;n=n.hash;var r=v.state||{};return[r.idx,{pathname:void 0===t?"/":t,search:void 0===e?"":e,hash:void 0===n?"":n,state:r.usr||null,key:r.key||"default"}]}function c(){if(d)P.call(d),d=null;else{var n=u(),t=n[0];if(n=n[1],P.length)if(null!=t){var e=g-t;e&&(d={action:"POP",location:n,retry:function(){h(-1*e)}},h(e))}else f("POP")}}function l(n){var t=document.querySelector("base"),e="";return t&&t.getAttribute("href")&&(e=-1===(e=(t=p.location.href).indexOf("#"))?t:t.slice(0,e)),e+"#"+("string"==typeof n?n:o(n))}function s(n,e){return void 0===e&&(e=null),t({},m,{},"string"==typeof n?i(n):n,{state:e,key:a()})}function f(n){y=n,n=u(),g=n[0],m=n[1],b.call({action:y,location:m})}function h(n){v.go(n)}var p=void 0===(n=(void 0===n?{}:n).window)?document.defaultView:n,v=p.history,d=null;p.addEventListener("popstate",c),p.addEventListener("hashchange",(function(){o(u()[1])!==o(m)&&c()}));var y="POP",g=(n=u())[0],m=n[1],P=r(),b=r();return null==g&&(g=0,v.replaceState(t({},v.state,{idx:g}),null)),{get action(){return y},get location(){return m},createHref:l,push:function n(t,e){var r=s(t,e);if(!P.length||(P.call({action:"PUSH",location:r,retry:function(){n(t,e)}}),0)){var a=[{usr:r.state,key:r.key,idx:g+1},l(r)];r=a[0],a=a[1];try{v.pushState(r,null,a)}catch(n){p.location.assign(a)}f("PUSH")}},replace:function n(t,e){var r=s(t,e);P.length&&(P.call({action:"REPLACE",location:r,retry:function(){n(t,e)}}),1)||(r=[{usr:r.state,key:r.key,idx:g},l(r)],v.replaceState(r[0],null,r[1]),f("REPLACE"))},go:h,back:function(){h(-1)},forward:function(){h(1)},listen:function(n){return b.push(n)},block:function(n){var t=P.push(n);return 1===P.length&&p.addEventListener("beforeunload",e),function(){t(),P.length||p.removeEventListener("beforeunload",e)}}}},l=i;function s(){}function f(){}f.resetWarningCache=s;var h=function(n,t){return n(t={exports:{}},t.exports),t.exports}((function(n){n.exports=function(){function n(n,t,e,r,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return n}n.isRequired=n;var e={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,elementType:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:f,resetWarningCache:s};return e.PropTypes=e,e}()}));h.array,h.bool,h.func,h.number,h.object,h.string,h.symbol,h.any,h.arrayOf,h.element,h.elementType,h.instanceOf,h.node,h.objectOf,h.oneOf,h.oneOfType,h.shape,h.exact,h.checkPropTypes,h.resetWarningCache,h.PropTypes;function p(){return(p=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e,r=arguments[t];for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n}).apply(this,arguments)}function v(n,t){if(!n)throw Error(t)}var d=n.createContext(),y=n.createContext({outlet:null,params:{},pathname:"",route:null});function g(e){var u=e.children,c=e.initialEntries,l=e.initialIndex;e=e.timeout;var s=n.useRef(null);return null==s.current&&(s.current=function(n){function e(n,e){return void 0===e&&(e=null),t({},v,{},"string"==typeof n?i(n):n,{state:e,key:a()})}function u(n,t,e){return!d.length||(d.call({action:n,location:t,retry:e}),!1)}function c(n,t){p=n,v=t,y.call({action:p,location:v})}function l(n){var t=Math.min(Math.max(h+n,0),f.length-1),e=f[t];u("POP",e,(function(){l(n)}))&&(h=t,c("POP",e))}var s=void 0===n?{}:n;n=s.initialEntries,s=void 0===(s=s.initialIndex)?0:s;var f=(void 0===n?["/"]:n).map((function(n){return t({pathname:"/",search:"",hash:"",state:null,key:a()},"string"==typeof n?i(n):n)})),h=Math.min(Math.max(s,0),f.length-1),p="POP",v=f[h],d=r(),y=r();return{get index(){return h},get action(){return p},get location(){return v},createHref:function(n){return"string"==typeof n?n:o(n)},push:function n(t,r){var a=e(t,r);u("PUSH",a,(function(){n(t,r)}))&&(h+=1,f.splice(h,f.length,a),c("PUSH",a))},replace:function n(t,r){var a=e(t,r);u("REPLACE",a,(function(){n(t,r)}))&&(f[h]=a,c("REPLACE",a))},go:l,back:function(){l(-1)},forward:function(){l(1)},listen:function(n){return y.push(n)},block:function(n){return d.push(n)}}}({initialEntries:c,initialIndex:l})),n.createElement(k,{children:u,history:s.current,timeout:e})}function m(n){var t=n.to,e=n.replace;return e=void 0!==e&&e,n=n.state,T()(t,{replace:e,state:n}),null}function P(){return L()}function b(){return null}function E(n){return n.element}function x(n){return n()}var O=n.useTransition||function(){return[x,!1]};function k(t){var e=t.children;e=void 0===e?null:e;var r=t.history,a=void 0===(t=t.timeout)?2e3:t,o=n.useState(r.location);t=o[0];var i=o[1],u=(a=O({timeoutMs:a}))[0];return a=a[1],o=n.useRef(!1),n.useContext(d)&&v(!1),o.current||(o.current=!0,r.listen((function(n){var t=n.location;u((function(){i(t)}))}))),n.createElement(d.Provider,{children:e,value:{history:r,location:t,pending:a}})}function C(n){var t=n.basename;t=void 0===t?"":t;var e=n.caseSensitive;return e=void 0!==e&&e,j(n=w(n.children),t,e)}function w(t){var e=[];return n.Children.forEach(t,(function(t){if(n.isValidElement(t)){var r=t.props,a=r.children,o=r.from,i=r.path;r=r.to,t.type===n.Fragment?e.push.apply(e,w(a)):(i=i||o||"/",r?t={path:i,redirectTo:r}:(t={path:i,element:t},(a=w(a)).length&&(t.children=a)),e.push(t))}})),e}function S(){return n.useContext(d).location}function T(){var t=n.useContext(d),e=t.history,r=t.pending,a=n.useContext(y).pathname;return null==e&&v(!1),n.useCallback((function(n,t){var o=void 0===t?{}:t;t=o.replace,o=o.state,"number"==typeof n?e.go(n):(n=I(n,a),e[t||r?"replace":"push"](n,o))}),[e,r,a])}function L(){return n.useContext(y).outlet}function R(t){var e=n.useContext(y).pathname;return n.useMemo((function(){return I(t,e)}),[t,e])}function j(t,e,r){void 0===e&&(e=""),void 0===r&&(r=!1);var a,o=n.useContext(y),i=o.params,u=o.pathname;o=o.route,e=e?W([u,e]):u,o=T();var c=S();if(!(a=n.useMemo((function(){return H(t,c,e,r)}),[t,c,e,r])))return null;var l=a.find((function(n){return null!=n.route.redirectTo}));return l?(a=l.params,l=(u=I(l.route.redirectTo,u)).pathname,/:\w+/.test(l)&&(u=p({},u,{pathname:V(l,a)})),o(u,{replace:!0}),null):a.reduceRight((function(t,r){var a=r.pathname,o=r.route;return n.createElement(y.Provider,{children:o.element,value:{outlet:t,params:p({},i,{},r.params),pathname:W([e,a]),route:o}})}),null)}function H(n,t,e,r){function a(n){var t=(n=i[n])[1];if(M(n[0],!0,r)[0].test(o))return{v:t.map((function(n,e){var a=M(e=W((e=t.slice(0,e+1)).map((function(n){return n.path}))),!1,r);return{params:U(e=a[1],(a=o.match(a[0])).slice(2)),pathname:"/"+a[1],route:n}}))}}void 0===e&&(e=""),void 0===r&&(r=!1),"string"==typeof t&&(t=l(t)),e=e.replace(/^\/+|\/+$/g,"");var o=t.pathname.slice(1);if(e)if(e===o)o="";else{if(!o.startsWith(e))return null;o=o.slice(e.length).replace(/^\/+/,"")}var i=function n(t,e,r,a,o){return void 0===e&&(e=[]),void 0===r&&(r=""),void 0===a&&(a=[]),void 0===o&&(o=[]),t.forEach((function(t,i){var u=W([r,t.path]),c=a.concat(t);i=o.concat(i),e.push([u,c,i]),t.children&&n(t.children,e,u,c,i)})),e}(n);for(function(n){var t=n.reduce((function(n,t){return n[t=t[0]]=function(n){var t=(n=n.split("/")).length;return n.some(A)&&(t+=-2),n.filter((function(n){return!A(n)})).reduce((function(n,t){return n+(_.test(t)?2:""===t?1:10)}),t)}(t),n}),{});n.sort((function(n,e){var r=n[2];n=t[n[0]];var a=e[2];return n!==(e=t[e[0]])?e-n:function(n,t){return n.length===t.length&&n.slice(0,-1).every((function(n,e){return n===t[e]}))?n[n.length-1]-t[t.length-1]:0}(r,a)}))}(i),n=0;n<i.length;++n)if("object"==typeof(t=a(n)))return t.v;return null}var _=/^:\w+$/;function A(n){return"*"===n}function M(n,t,e){var r=[],a="^("+n.replace(/^\/+/,"").replace(/\*\//g,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(n,t){return r.push(t),"([^\\/]+)"}))+")";return n.endsWith("*")?(n.endsWith("/*")&&(a+="\\/?"),r.push("*"),a+="(.*)"):t&&(a+="\\/?"),t&&(a+="$"),[new RegExp(a,e?void 0:"i"),r]}function U(n,t){return n.reduce((function(n,e,r){return n[e]=t[r],n}),{})}function W(n){return n.join("/").replace(/\/\/+/g,"/")}function $(n,t){var e=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return n.replace(/\/\/+/g,"/").split("/").forEach((function(n){".."===n?1<e.length&&e.pop():"."!==n&&e.push(n)})),1<e.length?W(e):"/"}function I(n,t){void 0===t&&(t="/");var e="string"==typeof n?l(n):n;n=e.pathname;var r=e.search;return r=void 0===r?"":r,e=void 0===(e=e.hash)?"":e,{pathname:n?n.startsWith("/")?$(n,"/"):$(n,t):t,search:r,hash:e}}function V(n,t){return void 0===t&&(t={}),n.replace(/:(\w+)/g,(function(n,e){return t[e]||":"+e})).replace(/\*$/,(function(n){return t[n]||n}))}function D(t,e){void 0===e&&(e=!0);var r=n.useContext(d).history;null==r&&v(!1),n.useEffect((function(){if(e){var n=r.block((function(e){var r=p({},e,{retry:function(){n(),e.retry()}});t(r)}));return n}}),[r,e,t])}function q(t){t=R(t);var e=n.useContext(d).history;return null==e&&v(!1),e.createHref(t)}function F(n){var t=S();return n=R(n),t.pathname===n.pathname}function B(){return n.useContext(y).params}export{C as B,w as C,j as D,S as E,I as F,R as G,H as L,V as M,q as a,F as b,T as c,B as d,u as e,c as f,g as q,k as r,m as t,D as u,P as v,L as w,b as x,E as y};
//# sourceMappingURL=react-router-aa695523.js.map
